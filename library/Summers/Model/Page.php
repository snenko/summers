<?php

/**
 * Summers_Model_Page
 * 
 * This class has been auto-generated by the Doctrine ORM Framework
 * 
 * @package    ##PACKAGE##
 * @subpackage ##SUBPACKAGE##
 * @author     ##NAME## <##EMAIL##>
 * @version    SVN: $Id: Builder.php 7490 2010-03-29 19:53:27Z jwage $
 */
class Summers_Model_Page extends Summers_Model_BasePage
{

    protected $_pages=array();

    /**
     * @param array $pages
     */
    public function setPages($pages)
    {
        $this->_pages = $pages;
    }

    /**
     * @return array
     */
    public function getPages($options=array())
    {

        if (!$this->_pages) {
            $this->setPages(self::findPages($options));
        }

        return $this->_pages;
    }

    public static function findPages($options=array())
    {
        $q = Doctrine_Query::create()
            ->from('Summers_Model_Page p');

        if (isset($options['order_by']))    $q->orderBy('p.' . $options['order_by'] . ' DESC');
        if (isset($options['pages']))       $q->whereIn('p.page_id', $options['pages']);
        if (isset($options['limit']))       $q->limit($options['limit']);

        $res = $q->fetchArray();

        return $res;
    }

}